{
  "kind": "build_request",
  "title": "Limit invoice line items to a maximum of 3 per invoice",
  "projectName": "Glotaxa",
  "priority": "normal",
  "requirements": [
    {
      "id": "REQ-1",
      "text": "In the Invoice tab (frontend/src/pages/Invoice.tsx), enforce a maximum of 3 line items per invoice for all countries. When the invoice already has 3 line items, the 'Add Line Item' button (or equivalent control) must be disabled or hidden to prevent adding a fourth item.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-4"
        ],
        "quotes": [
          "In the Invoice tab, For all the countries, ensure only 3 line items can be added per invoice."
        ]
      },
      "acceptanceCriteria": [
        "A user can add up to 3 line items on a single invoice.",
        "When 3 line items are present, the 'Add Line Item' button is disabled or hidden.",
        "This limit applies regardless of the selected country.",
        "Removing a line item re-enables the ability to add a new one (up to the 3-item limit).",
        "Existing invoices with fewer than 3 line items are unaffected and can still have items added up to the limit."
      ]
    }
  ],
  "constraints": [
    "The 3-line-item limit must apply universally across all supported countries.",
    "Do not modify any files under frontend/src/hooks/ or frontend/src/components/ui."
  ],
  "nonGoals": [
    "Changing the backend VAT rate logic or data model.",
    "Modifying the PDF or XML export format.",
    "Altering any existing line item fields or VAT calculation behaviour."
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  }
}